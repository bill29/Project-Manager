{"ast":null,"code":"var _jsxFileName = \"E:\\\\Workspace\\\\project-manager\\\\client\\\\src\\\\pages\\\\FavoriteMovieListPage.js\";\nimport React, { Component } from \"react\";\nimport Header from \"../components/header\";\nimport MovieItemComponent from \"../components/MovieItemComponent\";\nimport Footer from \"../components/Footer\";\nimport Axios from \"axios\";\n\nclass FavoriteMovieListPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeStatus = id => {\n      console.log(\"movie id:\" + id);\n      this.state.listMovies.map((item, index) => {\n        if (index === id) {\n          item.isLiked = !item.isLiked;\n          console.log(\"status: \" + item.isLiked);\n          this.state.listMovies[id] = item;\n          this.setState({\n            listMovies: this.state.listMovies\n          });\n          localStorage.setItem(\"list\", JSON.stringify(this.state.listMovies));\n        }\n      });\n    };\n\n    this.state = {\n      listMovies: [],\n      user: {},\n      loggedInStatus: \"LOGGED_IN\"\n    };\n    console.log(\"Constructor:\", this.props.loggedInStatus);\n    this.showListMovieLiked = this.showListMovieLiked.bind(this);\n  }\n\n  componentWillMount() {\n    var list = [];\n    Axios.get(\"http://localhost:5000/api/logged_in\").then(response => {\n      this.setState({\n        loggedInStatus: response.data.status\n      });\n      this.setState({\n        user: response.data.user\n      });\n      if (response.data.status === \"LOGGED_IN\") this.setState({\n        noti: `Welcom, ${response.data.user.username}`\n      });else this.setState({\n        noti: \"Log in or create an user account!\"\n      });\n    }).catch(err => {\n      throw err;\n    });\n\n    if (this.state.loggedInStatus === \"LOGGED_IN\") {\n      var user = localStorage.getItem('User');\n      Axios.get(`http://localhost:5000/get/${user.id}`).then(response => {\n        if (response.data.status === \"success\") {\n          list = response.data.list;\n        }\n      }).catch(error => {\n        list = [];\n        throw error;\n      });\n    } else {\n      list = JSON.parse(localStorage.getItem(\"list\"));\n    }\n\n    this.setState({\n      listMovies: list\n    });\n  }\n\n  showListMovieLiked(listMovies) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, listMovies != null ? listMovies.map((movie, index) => {\n      // if (movie.isLiked)\n      return /*#__PURE__*/React.createElement(MovieItemComponent, {\n        key: index,\n        id: index,\n        name: movie.name,\n        description: movie.description,\n        rateScore: movie.rateScore,\n        actors: movie.actors,\n        releaseDate: movie.releaseDate,\n        imageUrl: movie.imageUrl,\n        isLiked: movie.rateScore > 4,\n        onUpdateStatus: this.onChangeStatus,\n        onChange: this.onChangeStatus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }\n      });\n    }) : \"\");\n  }\n\n  render() {\n    var list = this.state.listMovies;\n    console.log(list[0]);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      state: this.props.loggedInStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, this.showListMovieLiked(list)), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default FavoriteMovieListPage;","map":{"version":3,"sources":["E:/Workspace/project-manager/client/src/pages/FavoriteMovieListPage.js"],"names":["React","Component","Header","MovieItemComponent","Footer","Axios","FavoriteMovieListPage","constructor","props","onChangeStatus","id","console","log","state","listMovies","map","item","index","isLiked","setState","localStorage","setItem","JSON","stringify","user","loggedInStatus","showListMovieLiked","bind","componentWillMount","list","get","then","response","data","status","noti","username","catch","err","getItem","error","parse","movie","name","description","rateScore","actors","releaseDate","imageUrl","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Header from \"../components/header\";\r\nimport MovieItemComponent from \"../components/MovieItemComponent\";\r\nimport Footer from \"../components/Footer\";\r\nimport Axios from \"axios\";\r\n\r\nclass FavoriteMovieListPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      listMovies: [\r\n      ],\r\n      user: {},\r\n      loggedInStatus: \"LOGGED_IN\"\r\n    };\r\n    console.log(\"Constructor:\" , this.props.loggedInStatus)\r\n    this.showListMovieLiked = this.showListMovieLiked.bind(this);\r\n  }\r\n  \r\n  componentWillMount() {\r\n    var list = []\r\n    Axios.get(\"http://localhost:5000/api/logged_in\")\r\n    .then(response => {\r\n      this.setState({ loggedInStatus: response.data.status })\r\n      this.setState({ user: response.data.user })\r\n      if (response.data.status === \"LOGGED_IN\")\r\n        this.setState({noti: `Welcom, ${response.data.user.username}`})\r\n      else\r\n        this.setState({noti: \"Log in or create an user account!\"})\r\n    })\r\n    .catch(err => {\r\n      throw err;\r\n    });\r\n\r\n    if (this.state.loggedInStatus === \"LOGGED_IN\") {\r\n      var user = localStorage.getItem('User');\r\n      Axios.get(`http://localhost:5000/get/${user.id}`)\r\n        .then(response => {\r\n          if (response.data.status === \"success\") {\r\n            list = response.data.list\r\n          }\r\n        })\r\n        .catch(error => {\r\n          list = []\r\n          throw error\r\n        })\r\n    } else {\r\n      list = JSON.parse(localStorage.getItem(\"list\"));\r\n    }\r\n    this.setState({\r\n      listMovies: list,\r\n    });\r\n  }\r\n\r\n  onChangeStatus = (id) => {\r\n    console.log(\"movie id:\" + id);\r\n    this.state.listMovies.map((item, index) => {\r\n      if (index === id) {\r\n        item.isLiked = !item.isLiked;\r\n        console.log(\"status: \" + item.isLiked);\r\n        this.state.listMovies[id] = item;\r\n        this.setState({\r\n          listMovies: this.state.listMovies,\r\n        });\r\n\r\n        localStorage.setItem(\"list\", JSON.stringify(this.state.listMovies));\r\n      }\r\n    });\r\n  };\r\n\r\n\r\n  showListMovieLiked(listMovies) {\r\n    return (\r\n      <div>\r\n        {listMovies != null\r\n          ? listMovies.map((movie, index) => {\r\n            // if (movie.isLiked)\r\n              return (\r\n                <MovieItemComponent\r\n                  key={index}\r\n                  id={index}\r\n                  name={movie.name}\r\n                  description={movie.description}\r\n                  rateScore={movie.rateScore}\r\n                  actors={movie.actors}\r\n                  releaseDate={movie.releaseDate}\r\n                  imageUrl={movie.imageUrl}\r\n                  isLiked={movie.rateScore > 4}\r\n                  onUpdateStatus={this.onChangeStatus}\r\n                  onChange={this.onChangeStatus}\r\n                />\r\n              );\r\n          })\r\n          : \"\"}\r\n      </div>\r\n    );\r\n  }\r\n  render() {\r\n    var list = this.state.listMovies;\r\n    console.log(list[0])\r\n    return (\r\n      <div>\r\n        <Header state={this.props.loggedInStatus} />\r\n        <div>\r\n          {/* {this.props.match.params.likedMovie === \"likedMovie\" */}\r\n          {/* // ? this.showListMovieLiked(this.state.listMovies)  */}\r\n            {this.showListMovieLiked(list)}\r\n\r\n          {/* : null}  */}\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FavoriteMovieListPage;\r\n"]},"metadata":{},"sourceType":"module"}