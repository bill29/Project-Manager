{"ast":null,"code":"var _jsxFileName = \"E:\\\\Workspace\\\\project-manager\\\\client\\\\src\\\\components\\\\RecommendComponent.js\";\nimport React, { Component } from \"react\";\nimport Header from \"../components/header\";\nimport MovieItemComponent from \"../components/MovieItemComponent\";\nimport Footer from \"../components/Footer\";\nimport axios from \"axios\";\n\nclass Recommended extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeStatus = id => {\n      console.log(\"movie id:\" + id);\n      this.state.listMovies.map((item, index) => {\n        if (index === id) {\n          item.isLiked = !item.isLiked;\n          console.log(\"status: \" + item.isLiked);\n          this.state.listMovies[id] = item;\n          this.setState({\n            listMovies: this.state.listMovies\n          });\n          localStorage.setItem(\"list\", JSON.stringify(this.state.listMovies));\n        }\n      });\n    };\n\n    this.state = {\n      listMovies: [],\n      user: {},\n      loggedInStatus: null\n    };\n    this.showListMovieLiked = this.showListMovieLiked.bind(this);\n  }\n\n  componentWillMount() {\n    var list = [];\n    axios.get(\"http://localhost:5000/api/script\").then(response => {\n      var str_arr = response.data[1];\n\n      if (str_arr.length > 2) {\n        str_arr = str_arr.substring(1, str_arr.length - 1).split(\",\");\n        str_arr.forEach(item => {\n          var movie_id = parseFloat(item);\n          axios.get(`http://localhost:5000/api/get/movie/${movie_id}`).then(res => {\n            list.push(res.data.movie);\n          });\n        });\n      }\n    }).catch(error => {\n      throw error;\n    });\n    this.setState({\n      listMovies: list\n    });\n  }\n\n  showListMovieLiked(listMovies) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, listMovies != null ? listMovies.map((movie, index) => {\n      return /*#__PURE__*/React.createElement(MovieItemComponent, {\n        key: index,\n        id: index,\n        name: movie.name,\n        description: movie.description,\n        rateScore: movie.rateScore,\n        actors: movie.actors // releaseDate={movie.releaseDate}\n        ,\n        imageUrl: movie.imageUrl,\n        isLiked: movie.isLiked,\n        onUpdateStatus: this.onChangeStatus,\n        onChange: this.onChangeStatus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 33\n        }\n      });\n    }) : \"\");\n  }\n\n  render() {\n    console.log(this.state.listMovies);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      state: this.props.state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, this.showListMovieLiked(this.state.listMovies)), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default Recommended;","map":{"version":3,"sources":["E:/Workspace/project-manager/client/src/components/RecommendComponent.js"],"names":["React","Component","Header","MovieItemComponent","Footer","axios","Recommended","constructor","props","onChangeStatus","id","console","log","state","listMovies","map","item","index","isLiked","setState","localStorage","setItem","JSON","stringify","user","loggedInStatus","showListMovieLiked","bind","componentWillMount","list","get","then","response","str_arr","data","length","substring","split","forEach","movie_id","parseFloat","res","push","movie","catch","error","name","description","rateScore","actors","imageUrl","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,kBAAP,MAA+B,kCAA/B;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,WAAN,SAA0BL,SAA1B,CAAoC;AAChCM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAkCnBC,cAlCmB,GAkCDC,EAAD,IAAQ;AACrBC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAcF,EAA1B;AACA,WAAKG,KAAL,CAAWC,UAAX,CAAsBC,GAAtB,CAA0B,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACvC,YAAIA,KAAK,KAAKP,EAAd,EAAkB;AACdM,UAAAA,IAAI,CAACE,OAAL,GAAe,CAACF,IAAI,CAACE,OAArB;AACAP,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAaI,IAAI,CAACE,OAA9B;AACA,eAAKL,KAAL,CAAWC,UAAX,CAAsBJ,EAAtB,IAA4BM,IAA5B;AACA,eAAKG,QAAL,CAAc;AACVL,YAAAA,UAAU,EAAE,KAAKD,KAAL,CAAWC;AADb,WAAd;AAIAM,UAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAe,KAAKV,KAAL,CAAWC,UAA1B,CAA7B;AACH;AACJ,OAXD;AAYH,KAhDkB;;AAEf,SAAKD,KAAL,GAAa;AACTC,MAAAA,UAAU,EAAE,EADH;AAGTU,MAAAA,IAAI,EAAE,EAHG;AAITC,MAAAA,cAAc,EAAE;AAJP,KAAb;AAMA,SAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;AACH;;AAEDC,EAAAA,kBAAkB,GAAG;AACjB,QAAIC,IAAI,GAAG,EAAX;AACAxB,IAAAA,KAAK,CAACyB,GAAN,CAAU,kCAAV,EACCC,IADD,CACMC,QAAQ,IAAI;AACd,UAAIC,OAAO,GAAGD,QAAQ,CAACE,IAAT,CAAc,CAAd,CAAd;;AACA,UAAID,OAAO,CAACE,MAAR,GAAiB,CAArB,EAAuB;AACnBF,QAAAA,OAAO,GAAGA,OAAO,CAACG,SAAR,CAAkB,CAAlB,EAAqBH,OAAO,CAACE,MAAR,GAAe,CAApC,EAAuCE,KAAvC,CAA6C,GAA7C,CAAV;AACAJ,QAAAA,OAAO,CAACK,OAAR,CAAiBtB,IAAD,IAAU;AACtB,cAAIuB,QAAQ,GAAGC,UAAU,CAACxB,IAAD,CAAzB;AACAX,UAAAA,KAAK,CAACyB,GAAN,CAAW,uCAAsCS,QAAS,EAA1D,EACCR,IADD,CACMU,GAAG,IAAI;AACTZ,YAAAA,IAAI,CAACa,IAAL,CAAUD,GAAG,CAACP,IAAJ,CAASS,KAAnB;AACH,WAHD;AAIH,SAND;AAQH;AACJ,KAdD,EAeCC,KAfD,CAeOC,KAAK,IAAI;AACZ,YAAMA,KAAN;AACH,KAjBD;AAkBA,SAAK1B,QAAL,CAAc;AAACL,MAAAA,UAAU,EAACe;AAAZ,KAAd;AACH;;AAiBDH,EAAAA,kBAAkB,CAACZ,UAAD,EAAa;AAC3B,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKA,UAAU,IAAI,IAAd,GACKA,UAAU,CAACC,GAAX,CAAe,CAAC4B,KAAD,EAAQ1B,KAAR,KAAkB;AAC3B,0BACI,oBAAC,kBAAD;AACI,QAAA,GAAG,EAAEA,KADT;AAEI,QAAA,EAAE,EAAEA,KAFR;AAGI,QAAA,IAAI,EAAE0B,KAAK,CAACG,IAHhB;AAII,QAAA,WAAW,EAAEH,KAAK,CAACI,WAJvB;AAKI,QAAA,SAAS,EAAEJ,KAAK,CAACK,SALrB;AAMI,QAAA,MAAM,EAAEL,KAAK,CAACM,MANlB,CAOI;AAPJ;AAQI,QAAA,QAAQ,EAAEN,KAAK,CAACO,QARpB;AASI,QAAA,OAAO,EAAEP,KAAK,CAACzB,OATnB;AAUI,QAAA,cAAc,EAAE,KAAKT,cAVzB;AAWI,QAAA,QAAQ,EAAE,KAAKA,cAXnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAeP,KAhBC,CADL,GAkBK,EAnBV,CADJ;AAuBH;;AACD0C,EAAAA,MAAM,GAAG;AACLxC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWC,UAAvB;AACA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAE,KAAKN,KAAL,CAAWK,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKa,kBAAL,CAAwB,KAAKb,KAAL,CAAWC,UAAnC,CADL,CAFJ,eAKI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,CADJ;AASH;;AAtF+B;;AAyFpC,eAAeR,WAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport Header from \"../components/header\";\r\nimport MovieItemComponent from \"../components/MovieItemComponent\";\r\nimport Footer from \"../components/Footer\";\r\nimport axios from \"axios\";\r\n\r\nclass Recommended extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            listMovies: [\r\n            ],\r\n            user: {},\r\n            loggedInStatus: null\r\n        };\r\n        this.showListMovieLiked = this.showListMovieLiked.bind(this);\r\n    }\r\n\r\n    componentWillMount() {\r\n        var list = []\r\n        axios.get(\"http://localhost:5000/api/script\")\r\n        .then(response => {\r\n            var str_arr = response.data[1]\r\n            if (str_arr.length > 2){\r\n                str_arr = str_arr.substring(1, str_arr.length-1).split(\",\");\r\n                str_arr.forEach((item) => {\r\n                    var movie_id = parseFloat(item)\r\n                    axios.get(`http://localhost:5000/api/get/movie/${movie_id}`)\r\n                    .then(res => {\r\n                        list.push(res.data.movie)\r\n                    })\r\n                })\r\n                \r\n            }\r\n        })\r\n        .catch(error => {\r\n            throw error;\r\n        })\r\n        this.setState({listMovies:list})\r\n    }\r\n\r\n    onChangeStatus = (id) => {\r\n        console.log(\"movie id:\" + id);\r\n        this.state.listMovies.map((item, index) => {\r\n            if (index === id) {\r\n                item.isLiked = !item.isLiked;\r\n                console.log(\"status: \" + item.isLiked);\r\n                this.state.listMovies[id] = item;\r\n                this.setState({\r\n                    listMovies: this.state.listMovies,\r\n                });\r\n\r\n                localStorage.setItem(\"list\", JSON.stringify(this.state.listMovies));\r\n            }\r\n        });\r\n    };\r\n    showListMovieLiked(listMovies) {\r\n        return (\r\n            <div>\r\n                {listMovies != null\r\n                    ? listMovies.map((movie, index) => {\r\n                            return (\r\n                                <MovieItemComponent\r\n                                    key={index}\r\n                                    id={index}\r\n                                    name={movie.name}\r\n                                    description={movie.description}\r\n                                    rateScore={movie.rateScore}\r\n                                    actors={movie.actors}\r\n                                    // releaseDate={movie.releaseDate}\r\n                                    imageUrl={movie.imageUrl}\r\n                                    isLiked={movie.isLiked}\r\n                                    onUpdateStatus={this.onChangeStatus}\r\n                                    onChange={this.onChangeStatus}\r\n                                />\r\n                            );\r\n                    })\r\n                    : \"\"}\r\n            </div>\r\n        );\r\n    }\r\n    render() {\r\n        console.log(this.state.listMovies)\r\n        return (\r\n            <div>\r\n                <Header state={this.props.state} />\r\n                <div>\r\n                    {this.showListMovieLiked(this.state.listMovies)}\r\n                </div>\r\n                <Footer />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Recommended;\r\n"]},"metadata":{},"sourceType":"module"}